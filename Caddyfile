ws.safemedia.com {

    reverse_proxy app:8081

    # Proxy WebSocket traffic separately
    reverse_proxy anttp_server:8081

    encode gzip

    log {
        output stdout
    }

}

anttp.safemedia.com {

    # Proxy all other traffic to antTP Rust server
    reverse_proxy /{path*} anttp_server:18888


    encode gzip

    log {
        output stdout
    }

}

dweb.safemedia.com {

    # Proxy all other traffic to DWEB Rust server
    reverse_proxy /{path*} dweb_server:8083


    encode gzip

    log {
        output stdout
    }

}
